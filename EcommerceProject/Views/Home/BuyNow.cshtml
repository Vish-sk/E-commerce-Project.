@using EcommerceProject.Views.Dto
@model BuyNowDTO
@{
    ViewData["Title"] = "Buy Now | " + Model.ProductName;
}

<style>
    :root {
        --primary: #FF9900; /* Amazon orange */
        --secondary: #2874F0; /* Flipkart blue */
        --light-gray: #f5f5f5;
        --dark-gray: #212121;
        --border-gray: #e0e0e0;
        --white: #ffffff;
        --success: #388e3c;
        --danger: #e53935;
    }

    .buynow-page {
        background-color: var(--light-gray);
        padding: 40px 0;
        min-height: 100vh;
    }

    .buynow-container {
        max-width: 1200px;
        margin: 0 auto;
    }

    .buynow-card {
        background: var(--white);
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .product-image-container {
        padding: 30px;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        background: var(--white);
        border-right: 1px solid var(--border-gray);
    }

    .product-image {
        max-height: 350px;
        max-width: 100%;
        object-fit: contain;
    }

    .product-details {
        padding: 30px;
    }

    .product-title {
        font-size: 22px;
        font-weight: 500;
        color: var(--dark-gray);
        margin-bottom: 15px;
    }

    .price-section {
        margin-bottom: 25px;
    }

    .current-price {
        font-size: 24px;
        font-weight: 600;
        color: var(--dark-gray);
    }

    .quantity-control {
        display: flex;
        align-items: center;
        margin-bottom: 25px;
    }

    .quantity-btn {
        width: 40px;
        height: 40px;
        border: 1px solid var(--border-gray);
        background: var(--white);
        font-size: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
    }

    .quantity-input {
        width: 60px;
        height: 40px;
        text-align: center;
        border-top: 1px solid var(--border-gray);
        border-bottom: 1px solid var(--border-gray);
        border-left: none;
        border-right: none;
    }

    .subtotal-section {
        padding: 15px 0;
        border-top: 1px solid var(--border-gray);
        border-bottom: 1px solid var(--border-gray);
        margin-bottom: 25px;
    }

    .subtotal-label {
        font-size: 16px;
        color: var(--dark-gray);
    }

    .subtotal-value {
        font-size: 20px;
        font-weight: 600;
        color: var(--dark-gray);
    }

    .section-title {
        font-size: 18px;
        font-weight: 500;
        margin-bottom: 20px;
        color: var(--dark-gray);
    }

    .form-label {
        font-weight: 500;
        color: var(--dark-gray);
        margin-bottom: 8px;
    }

    .form-control {
        padding: 10px 15px;
        border-radius: 4px;
        border: 1px solid var(--border-gray);
        margin-bottom: 15px;
    }

        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 153, 0, 0.1);
        }

    .btn-place-order {
        background-color: var(--primary);
        color: white;
        border: none;
        padding: 12px;
        border-radius: 4px;
        font-size: 16px;
        font-weight: 500;
        width: 100%;
        margin-top: 20px;
        transition: all 0.3s;
    }

        .btn-place-order:hover {
            background-color: #e68a00;
        }

    .delivery-message {
        background-color: #f5f5f5;
        padding: 12px;
        border-radius: 4px;
        margin-bottom: 25px;
        font-size: 14px;
    }

    @@media (max-width: 768px) {
        .product-image-container {
            border-right: none;
            border-bottom: 1px solid var(--border-gray);
            padding: 20px;
        }

        .product-details {
            padding: 20px;
        }

        .product-title {
            font-size: 20px;
        }

        .current-price {
            font-size: 22px;
        }
    }
</style>

<div class="buynow-page">
    <div class="container buynow-container">
        <div class="buynow-card">
            <div class="row g-0">
                <!-- Product Image -->
                <div class="col-md-4">
                    <div class="product-image-container">
                        <img src="@Model.ImagePath" class="product-image" alt="@Model.ProductName" />
                    </div>
                </div>

                <!-- Product Details and Form -->
                <div class="col-md-8">
                    <div class="product-details">
                        <h2 class="product-title">@Model.ProductName</h2>

                        <div class="price-section">
                            <div class="current-price">₹@Model.Price</div>
                        </div>

                        <form asp-action="BuyNow" method="post">
                            <input type="hidden" asp-for="ProductId" />
                            <input type="hidden" asp-for="ProductName" />
                            <input type="hidden" asp-for="Price" id="originalPrice" value="@Model.Price" />
                            <input type="hidden" asp-for="ImagePath" />

                            <!-- Quantity Selector -->
                            <div class="quantity-control">
                                <label class="form-label">Quantity:</label>
                                <div class="d-flex ms-3">
                                    <button type="button" class="quantity-btn" onclick="adjustQuantity(-1)">−</button>
                                    <input asp-for="Quantity" id="quantity" type="number" class="quantity-input" value="1" min="1" readonly />
                                    <button type="button" class="quantity-btn" onclick="adjustQuantity(1)">+</button>
                                </div>
                            </div>

                            <!-- Subtotal -->
                            <div class="subtotal-section">
                                <div class="d-flex justify-content-between">
                                    <span class="subtotal-label">Subtotal:</span>
                                    <span class="subtotal-value" id="subtotal">₹@Model.Price</span>
                                </div>
                            </div>

                            <!-- Delivery Information -->
                            <h4 class="section-title">Delivery Information</h4>

                            <div class="delivery-message">
                                <i class="fas fa-check-circle text-success"></i> FREE delivery available
                            </div>

                            @* <div class="mb-3"> *@
                            @*     <label asp-for="CustomerName" class="form-label">Full Name</label> *@
                            @*     <input asp-for="CustomerName" class="form-control" placeholder="Enter your full name" required /> *@
                            @* </div> *@

                            @* <div class="mb-3"> *@
                            @*     <label asp-for="Address" class="form-label">Shipping Address</label> *@
                            @*     <textarea asp-for="Address" class="form-control" rows="3" placeholder="Enter complete address" required></textarea> *@
                            @* </div> *@

                            @* <div class="row"> *@
                            @*     <div class="col-md-6 mb-3"> *@
                            @*         <label asp-for="City" class="form-label">City</label> *@
                            @*         <input asp-for="City" class="form-control" placeholder="Enter your city" required /> *@
                            @*     </div> *@
                            @*     <div class="col-md-6 mb-3"> *@
                            @*         <label asp-for="PostalCode" class="form-label">PIN Code</label> *@
                            @*         <input asp-for="PostalCode" class="form-control" placeholder="6-digit PIN code" required /> *@
                            @*     </div> *@
                            @* </div> *@

                            <button type="submit" class="btn-place-order">
                                <i class="fas fa-shopping-bag me-2"></i> Place Order
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function adjustQuantity(change) {
            let quantity = document.getElementById('quantity');
            let current = parseInt(quantity.value);
            if (current + change >= 1) {
                quantity.value = current + change;
                updateSubtotal();
            }
        }

        function updateSubtotal() {
            let price = parseFloat(document.getElementById('originalPrice').value);
            let qty = parseInt(document.getElementById('quantity').value);
            let subtotal = price * qty;
            document.getElementById('subtotal').innerText = '₹' + subtotal.toFixed(2);
        }
    </script>

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
}